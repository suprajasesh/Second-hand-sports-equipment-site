"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const devkit_1 = require("@nx/devkit");
const serverless_1 = require("../serverless/serverless");
function default_1(tree, options) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const appTask = (0, serverless_1.serverlessGenerator)(tree, options);
        (0, devkit_1.updateJson)(tree, 'package.json', (json) => {
            var _a, _b, _c, _d;
            var _e, _f, _g;
            (_a = json.scripts) !== null && _a !== void 0 ? _a : (json.scripts = {});
            (_b = (_e = json.scripts).lint) !== null && _b !== void 0 ? _b : (_e.lint = 'npx nx lint');
            (_c = (_f = json.scripts)['serve-functions']) !== null && _c !== void 0 ? _c : (_f['serve-functions'] = 'npx nx serve-functions');
            (_d = (_g = json.scripts)['deploy-functions']) !== null && _d !== void 0 ? _d : (_g['deploy-functions'] = 'npx nx deploy-functions');
            return json;
        });
        (0, devkit_1.generateFiles)(tree, (0, devkit_1.joinPathFragments)(__dirname, 'files'), '', Object.assign(Object.assign({}, options), { tmpl: '' }));
        tree.delete('apps');
        tree.delete('libs');
        return appTask;
    });
}
exports.default = default_1;
//# sourceMappingURL=preset.js.map